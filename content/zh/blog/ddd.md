---
title: "领域建模方法、模式及实践"
linkTitle: "领域建模方法、模式及实践"
date: 2021-03-04
description: >
  本文偏向于领域建模方法论、模式及实践的索引，后续会持续更新一系列文章阐述具体的细节。
---

## 前言

软件开发很多时候是有复杂性做斗争。在《软件复杂度根源及应对策略概述》一文中对此有具体的阐述。领域建模是解决结构复杂性的重要手段之一。

问题：目前很多东西比较成熟，比较少从0-1去建设这些东西，梳理领域模式还有意义吗？

我们做的也不仅仅是归纳梳理，还有基于本质的演绎。通过对事物本质的思考、不变性与差异性的分析，更容易深刻理解各种业务模式，及基于此做一些创新。此外，事物也是在不断发展的，需要以发展的眼光去对待。

## 概述

> All models are wrong, but some are useful.
> Remember that all models are wrong; the practical question is how wrong do they have to be to not be useful.

地图（对现实的抽象建模，有不同层次的粒度）

盲人摸象（概念事实 or 经验事实；不同的视角建模结果不同）

金星运动轨迹（基于行为 or 基于模型？不同问题适应不同方法）

## 方法论

宏观的战略、战术等方法论在《Domain Driven Design》、《Implementation Domain Driven Design》都有具体阐述。阿里内部，阿白、卷爷、荣华、嵩华等老师也分享过不少方法论及实践。

此外，[DDD Crew](https://github.com/ddd-crew) 里也提到了不少具体的方法和工具，如[Bounded Context Canvas](https://github.com/ddd-crew/bounded-context-canvas),  [Aggregate Design Canvas](https://github.com/ddd-crew/aggregate-design-canvas)，对于具体的实践也很有指导意义。

早期刚接触的时候也简单总结过一些，如<http://gitlab.alibaba-inc.com/domain-modeling/ddd-docs>，

...

### 原则

+ 领域边界拆分原则？
+ 拆分的粒度？
+ ...

## 元模型及模式

### 业务无关建模模式及方法论


相对通用的方法论

宇宙领域万物皆原子，OO领域万物皆对象，DB领域万物皆实体与关系，流程域万物皆Activity和Movement；抽象有利于我们从宏观上把握共性，但不合适的粒度无法反应进一步的特性，也不能帮我们解决实际问题，空谈抽象没有意义。

但是，基于这种**演绎和top-down**的方式，在面向**不确定**性的情况下(如探索需求阶段)，可采取此方法辅助我们逐步细化。

+ 认知论：5W1H、形而上学...
   - What（外在特征、内在本质、相关事物）、Who（参与者、不同人视角）、When（发生时间、过去现在将来）、Where（发生地点，空间）、Why（内因、外因；目的）、How（行为流程；How Much/Many）
   - 范畴：亚里士多德论述事物的十大基本方面（实体、数量、性质、关系、地点、时间、状态...）;康德判决表 四类（量、质、关系、样式）
+ ERP5：
    - 5大类型：节点、资源、移动、项目、路径
+ IBM/蚂蚁：FSDM/飞马模型
    - 3个层面（偏方法论）：事物属性（描述，有什么）、事物特点（分类，是什么）、事物之间的关系（和外界的关系）
    - 9大概念（偏具体模式）：地理位置、产品、合约、帐号、资源项、事件、条件、渠道
+ TOGAF架构元模型：
    - 业务架构：组织、参与者、角色、功能、流程；位置；产品、事件、控制；合同、服务质量、评测；...
+ ....

更具体的模式及方法论，《Analysis Patterns》里有提到一些，不过整体看起来有点偏零散的实践，缺乏足够的体系(也有可能是个人能力问题，没彻底理解作者思路)，本系列文章后续提出一系列可能相对体系的方法，并将各个层级的抽象及实践串联起来。

+ 拆分元知识与操作
    - 如各种类型、支付方式、物流方式、地址元数据
+ 行为/过程等按生命周期/阶段拆分：需求/约定 -> 计划 -> 履行/记录
    -  如交易合同与交易履行、资金约定与资金履行、物流约定与物流履行
+ 加入时间维度：记录，行为，凭证
+ 拆分规则
    - 如各种路由规则或策略
    - 比如对变更加上validStart, validEnd；如工商注册号变更、用户信息变更，对于跨度经过变更前和变更后也可以友好处理
+ 状态：...
+ ...

具体实践层面

+ 技术/业务标识：唯一标识的设计、可变性、标准、多域集成
    - 比如身份证、企业工商注册号、业务身份、国家地址码...
+ 关系的模式：一对多、多对多、层级/树形、网状...；在模型和储存层面各方案优缺点及场景
    - 如组织结构/人员关系等属于层级，静态hardCode/动态实现，各种变种
+ ....

### 业务相关模式及实践

+ 通用业务模型：一般意义
+ 业务模型的变化：各种行业、不同解决方案的差异

《Enterprise Patterns and MDA》 等书籍有提到一些类似的概念，不过缺失一些更细的分析及实践细节，另外有不是模型和目前发展也有一定差异，具体实践中的一些模式或反模式也没有提及。

电商域

+ 人：参与者(Participant)、会员(Member/Customer)、账户(Account)、个人(Person)/组织(Organization)、租户、联系方式(地址、联系人)、授权方式(密码/验证码/开放授权)
+ 货：物品、产品、商品、SKU、货品、定制品、商品快照
    - 商品相关概念及建模探讨 
+ 交易
+ 资金
+ 物流
+ 营销
+ ...

不同行业或领域差异

+ B类与C类
+ 国际化（日期、金额、...）
+ 电商、金融、供应链、保险 ...
+ ...


